---
import Card from '@/components/common/Card.astro';
import Code from '@/components/common/Code.astro';

export const contentOrder = 9;
export const id = 'hash';
const code = `console.log(location.hash);
location.hash = '#'`;
---

<Card id={id}>
  <h2>location.hashについて</h2>
  <p>URLのハッシュを取得・設定することができる</p>
  <Code code={code} />
  <button type='button'>現在のハッシュを取得、#(TOP)へ遷移</button>
  <output></output>
</Card>

<script>
  const root = document.getElementById('hash');
  if (root) {
    const button = root.querySelector('button');
    const output = root.querySelector('output');
    if (button && output) {
      button.addEventListener('click', () => {
        if (location.hash === '#') {
          output.textContent = [
            location.hash,
            'すでに#が設定されているため、遷移しません。',
          ].join('\n');
        } else {
          output.textContent = location.hash;
          location.hash = '#';
        }
      });
    }
  }
</script>
